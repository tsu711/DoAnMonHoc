{"ast":null,"code":"var _jsxFileName = \"C:\\\\DiaD\\\\java\\\\frontend\\\\src\\\\pages\\\\home\\\\LoadProduct.js\",\n  _s = $RefreshSig$();\nimport React, { useEffect, useState } from \"react\";\nimport { useNavigate, useLocation, Link } from \"react-router-dom\";\nimport { GET_PAGE, GET_ID } from \"../api/apiService\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst FilterTop = () => {\n  _s();\n  const [products, setProducts] = useState([]);\n  const [categories, setCategories] = useState(1);\n  const [totalPages, setTotalPages] = useState(1);\n  const [sortBy, setSortBy] = useState(\"newest\"); // Thêm state cho việc sắp xếp sản phẩm\n  const [ratings, setRatings] = useState({}); // Thêm state để lưu trữ xếp hạng sản phẩm\n  const numItems = 8;\n  const navigate = useNavigate();\n  const location = useLocation();\n  const queryParams = new URLSearchParams(location.search);\n  const currentPage = parseInt(queryParams.get(\"page\")) || 1;\n  let categoryId = queryParams.get(\"categoryId\");\n\n  // Hàm để xử lý thay đổi loại sản phẩm được chọn để sắp xếp\n  const handleSortChange = event => {\n    setSortBy(event.target.value);\n  };\n\n  // Hàm xử lý sự kiện khi người dùng thực hiện đánh giá sản phẩm\n  const handleRatingChange = (productId, rating) => {\n    setRatings({\n      ...ratings,\n      [productId]: rating\n    });\n    // Gửi dữ liệu xếp hạng lên máy chủ để lưu trữ\n    // Ví dụ: POST đến API để lưu xếp hạng\n  };\n\n  useEffect(() => {\n    // Thực hiện gọi API hoặc sắp xếp danh sách sản phẩm theo loại sản phẩm mới\n    if (categoryId === \"null\") {\n      categoryId = null;\n    }\n    GET_PAGE(`products`, currentPage - 1, numItems, categoryId, sortBy).then(response => {\n      setProducts(response.data);\n      const contentRangeHeader = response.headers[\"content-range\"];\n      const [, totalItems] = contentRangeHeader.match(/\\/(\\d+)/);\n      const calculatedTotalPages = Math.ceil(totalItems / numItems);\n      setTotalPages(calculatedTotalPages);\n    });\n    if (categoryId !== null) {\n      GET_ID(`categories`, categoryId).then(item => setCategories(item.data));\n    } else {\n      setCategories({\n        name: \"Tất cả sản phẩm\"\n      });\n    }\n  }, [categoryId, currentPage, sortBy]);\n  return /*#__PURE__*/_jsxDEV(\"section\", {\n    className: \"section-content padding-y\",\n    children: /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"row\",\n      children: products.length > 0 && products.map(row => /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"col-xl-3 col-lg-3 col-md-4 col-6\",\n        children: /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"card card-product-grid\",\n          children: [/*#__PURE__*/_jsxDEV(Link, {\n            to: `/detailProduct?productId=${row.id}`,\n            className: \"img-wrap\",\n            children: /*#__PURE__*/_jsxDEV(\"img\", {\n              src: `./images/items/${row.thumbnail}`,\n              alt: row.title,\n              className: \"img-fluid\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 58,\n              columnNumber: 19\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 57,\n            columnNumber: 17\n          }, this), /*#__PURE__*/_jsxDEV(\"figcaption\", {\n            className: \"info-wrap\",\n            children: [/*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"rating-stars mb-1\",\n              children: /*#__PURE__*/_jsxDEV(\"ul\", {\n                className: \"rating-stars mb-1\",\n                children: [...Array(5)].map((_, index) => /*#__PURE__*/_jsxDEV(\"li\", {\n                  style: {\n                    color: index < ratings[row.id] ? \"gold\" : \"gray\"\n                  },\n                  onClick: () => handleRatingChange(row.id, index + 1),\n                  children: /*#__PURE__*/_jsxDEV(\"i\", {\n                    className: \"fa fa-star\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 65,\n                    columnNumber: 27\n                  }, this)\n                }, index, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 64,\n                  columnNumber: 25\n                }, this))\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 62,\n                columnNumber: 21\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 61,\n              columnNumber: 19\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              children: /*#__PURE__*/_jsxDEV(Link, {\n                to: `/detailProduct?productId=${row.id}`,\n                className: \"title\",\n                children: row.title\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 71,\n                columnNumber: 21\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 70,\n              columnNumber: 19\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"price h5 mt-2\",\n              children: [\"$\", row.price]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 73,\n              columnNumber: 19\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 60,\n            columnNumber: 17\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 56,\n          columnNumber: 15\n        }, this)\n      }, row.id, false, {\n        fileName: _jsxFileName,\n        lineNumber: 55,\n        columnNumber: 13\n      }, this))\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 52,\n      columnNumber: 7\n    }, this)\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 51,\n    columnNumber: 5\n  }, this);\n};\n_s(FilterTop, \"4nfolcXnX6oppuoQ2yadfF+Kh58=\", false, function () {\n  return [useNavigate, useLocation];\n});\n_c = FilterTop;\nexport default FilterTop;\nvar _c;\n$RefreshReg$(_c, \"FilterTop\");","map":{"version":3,"names":["React","useEffect","useState","useNavigate","useLocation","Link","GET_PAGE","GET_ID","jsxDEV","_jsxDEV","FilterTop","_s","products","setProducts","categories","setCategories","totalPages","setTotalPages","sortBy","setSortBy","ratings","setRatings","numItems","navigate","location","queryParams","URLSearchParams","search","currentPage","parseInt","get","categoryId","handleSortChange","event","target","value","handleRatingChange","productId","rating","then","response","data","contentRangeHeader","headers","totalItems","match","calculatedTotalPages","Math","ceil","item","name","className","children","length","map","row","to","id","src","thumbnail","alt","title","fileName","_jsxFileName","lineNumber","columnNumber","Array","_","index","style","color","onClick","price","_c","$RefreshReg$"],"sources":["C:/DiaD/java/frontend/src/pages/home/LoadProduct.js"],"sourcesContent":["import React, { useEffect, useState } from \"react\";\nimport { useNavigate, useLocation, Link } from \"react-router-dom\";\nimport { GET_PAGE, GET_ID } from \"../api/apiService\";\nconst FilterTop = () => {\n  const [products, setProducts] = useState([]);\n  const [categories, setCategories] = useState(1);\n  const [totalPages, setTotalPages] = useState(1);\n  const [sortBy, setSortBy] = useState(\"newest\"); // Thêm state cho việc sắp xếp sản phẩm\n  const [ratings, setRatings] = useState({}); // Thêm state để lưu trữ xếp hạng sản phẩm\n  const numItems = 8;\n  const navigate = useNavigate();\n  const location = useLocation();\n  const queryParams = new URLSearchParams(location.search);\n  const currentPage = parseInt(queryParams.get(\"page\")) || 1;\n  let categoryId = queryParams.get(\"categoryId\");\n  \n  // Hàm để xử lý thay đổi loại sản phẩm được chọn để sắp xếp\n  const handleSortChange = (event) => {\n    setSortBy(event.target.value);\n  };\n\n  // Hàm xử lý sự kiện khi người dùng thực hiện đánh giá sản phẩm\n  const handleRatingChange = (productId, rating) => {\n    setRatings({...ratings, [productId]: rating});\n    // Gửi dữ liệu xếp hạng lên máy chủ để lưu trữ\n    // Ví dụ: POST đến API để lưu xếp hạng\n  };\n\n  useEffect(() => {\n    // Thực hiện gọi API hoặc sắp xếp danh sách sản phẩm theo loại sản phẩm mới\n    if (categoryId === \"null\") {\n      categoryId = null;\n    }\n    GET_PAGE(`products`, currentPage - 1, numItems, categoryId, sortBy).then(\n      (response) => {\n        setProducts(response.data);\n        const contentRangeHeader = response.headers[\"content-range\"];\n        const [, totalItems] = contentRangeHeader.match(/\\/(\\d+)/);\n        const calculatedTotalPages = Math.ceil(totalItems / numItems);\n        setTotalPages(calculatedTotalPages);\n      }\n    );\n    if (categoryId !== null) {\n      GET_ID(`categories`, categoryId).then((item) => setCategories(item.data));\n    } else {\n      setCategories({ name: \"Tất cả sản phẩm\" });\n    }\n  }, [categoryId, currentPage, sortBy]);\n\n  return (\n    <section className=\"section-content padding-y\">\n      <div className=\"row\">\n        {products.length > 0 &&\n          products.map((row) => (\n            <div className=\"col-xl-3 col-lg-3 col-md-4 col-6\" key={row.id}>\n              <div className=\"card card-product-grid\">\n                <Link to={`/detailProduct?productId=${row.id}`} className=\"img-wrap\">\n                  <img src={`./images/items/${row.thumbnail}`} alt={row.title} className=\"img-fluid\" />\n                </Link>\n                <figcaption className=\"info-wrap\">\n                  <div className=\"rating-stars mb-1\">\n                    <ul className=\"rating-stars mb-1\">\n                      {[...Array(5)].map((_, index) => (\n                        <li key={index} style={{ color: index < ratings[row.id] ? \"gold\" : \"gray\" }} onClick={() => handleRatingChange(row.id, index + 1)}>\n                          <i className=\"fa fa-star\"></i>\n                        </li>\n                      ))}\n                    </ul>\n                  </div>\n                  <div>\n                    <Link to={`/detailProduct?productId=${row.id}`} className=\"title\">{row.title}</Link>\n                  </div>\n                  <div className=\"price h5 mt-2\">${row.price}</div>\n                </figcaption>\n              </div>\n            </div>\n          ))}\n      </div>\n    </section>\n  );\n};\nexport default FilterTop;\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}