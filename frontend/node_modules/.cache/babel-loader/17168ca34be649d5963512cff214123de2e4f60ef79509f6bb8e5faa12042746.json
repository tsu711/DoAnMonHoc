{"ast":null,"code":"var _jsxFileName = \"C:\\\\DiaD\\\\java\\\\frontend\\\\src\\\\pages\\\\search\\\\SearchResultPage.js\",\n  _s = $RefreshSig$();\nimport React, { useEffect, useState } from 'react';\nimport { useNavigate, useLocation } from 'react-router-dom';\nimport { GET_PAGE } from '../api/apiService';\n// import imgNoSearch from '../assets/images/empty-search.webp';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nimport { Fragment as _Fragment } from \"react/jsx-dev-runtime\";\nconst SearchResultsPage = () => {\n  _s();\n  const navigate = useNavigate();\n  const location = useLocation();\n  const [allProducts, setAllProducts] = useState([]);\n  const [currentPage, setCurrentPage] = useState(1);\n  const [loading, setLoading] = useState(false);\n  const [allResultsLoaded, setAllResultsLoaded] = useState(false);\n  const [searchQuery, setSearchQuery] = useState('');\n  const handleLoadMore = async () => {\n    try {\n      if (allResultsLoaded) {\n        return;\n      }\n      const nextPage = currentPage + 1;\n      const products = await GET_PAGE('products', nextPage - 1, 10, null, null, searchQuery);\n      if (products.data.length === 0) {\n        setAllResultsLoaded(true);\n        return;\n      }\n      const newResults = products.data;\n      setAllProducts(prevProducts => [...prevProducts, ...newResults]);\n      setCurrentPage(nextPage);\n    } catch (error) {\n      console.error('Error loading more:', error);\n    }\n  };\n  useEffect(() => {\n    const query = new URLSearchParams(location.search).get('q');\n    setSearchQuery(query);\n\n    // Chỉ thực hiện fetch dữ liệu khi có sự thay đổi trong searchQuery\n    if (query && query !== searchQuery) {\n      setLoading(true);\n      setCurrentPage(1); // Reset trang về 1 khi có sự thay đổi searchQuery\n      setAllResultsLoaded(false);\n      const fetchSearchResults = async () => {\n        try {\n          const products = await GET_PAGE('products', 0, 10, null, null, query);\n          setAllProducts(products.data);\n        } catch (error) {\n          console.error('Error fetching search results:', error);\n        } finally {\n          setLoading(false);\n        }\n      };\n      fetchSearchResults();\n    }\n  }, [location.search, searchQuery]);\n  const filteredResults = allProducts.filter(row => row.title.toLowerCase().includes(searchQuery.toLowerCase()));\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"container\",\n    children: filteredResults.length > 0 ? /*#__PURE__*/_jsxDEV(_Fragment, {\n      children: [/*#__PURE__*/_jsxDEV(\"h2\", {\n        children: `Tìm thấy sản phẩm cho từ khoá '${searchQuery}'`\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 74,\n        columnNumber: 21\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"row\",\n        children: filteredResults.map(row => /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"col-xl-4 col-lg-4 col-md-4 col-6\",\n          children: /*#__PURE__*/_jsxDEV(\"figure\", {\n            className: \"card card-product-grid\",\n            children: [/*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"img-wrap\",\n              children: [/*#__PURE__*/_jsxDEV(\"span\", {\n                className: \"badge badge-danger\",\n                children: \" M\\u1EDAI \"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 81,\n                columnNumber: 41\n              }, this), /*#__PURE__*/_jsxDEV(\"a\", {\n                href: `/detailProduct?productId=${row.id}`,\n                className: \"img-wrap\",\n                style: {\n                  height: '300px',\n                  objectFit: 'cover',\n                  width: '100%'\n                },\n                children: /*#__PURE__*/_jsxDEV(\"img\", {\n                  src: `./images/items/${row.thumbnail}`,\n                  alt: row.title\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 83,\n                  columnNumber: 45\n                }, this)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 82,\n                columnNumber: 41\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 80,\n              columnNumber: 37\n            }, this), /*#__PURE__*/_jsxDEV(\"figcaption\", {\n              className: \"info-wrap\",\n              children: [/*#__PURE__*/_jsxDEV(\"a\", {\n                href: \"#\",\n                className: \"title mb-2\",\n                children: row.title\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 87,\n                columnNumber: 41\n              }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"price-wrap\",\n                children: /*#__PURE__*/_jsxDEV(\"span\", {\n                  className: \"price\",\n                  children: \"\\u01A0\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 91,\n                  columnNumber: 45\n                }, this)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 90,\n                columnNumber: 41\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 86,\n              columnNumber: 37\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 79,\n            columnNumber: 1\n          }, this)\n        }, row.id, false, {\n          fileName: _jsxFileName,\n          lineNumber: 78,\n          columnNumber: 29\n        }, this))\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 76,\n        columnNumber: 21\n      }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n        className: \"btn btn-primary mb-3\",\n        style: {\n          marginLeft: '590px'\n        },\n        onClick: handleLoadMore,\n        children: \"Load More\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 99,\n        columnNumber: 21\n      }, this)]\n    }, void 0, true) : /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"container d-flex flex-column align-items-center justify-content-center mt-3\",\n      children: /*#__PURE__*/_jsxDEV(_Fragment, {\n        children: [/*#__PURE__*/_jsxDEV(\"img\", {\n          src: '',\n          alt: \"No search results\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 106,\n          columnNumber: 25\n        }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n          className: \"mt-3 mb-3\",\n          children: \"Kh\\xF4ng c\\xF3 s\\u1EA3n ph\\u1EA9m b\\u1EA1n c\\u1EA7n t\\xECm.\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 107,\n          columnNumber: 25\n        }, this)]\n      }, void 0, true)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 104,\n      columnNumber: 17\n    }, this)\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 71,\n    columnNumber: 9\n  }, this);\n};\n_s(SearchResultsPage, \"9qqVKbAKQSg9v6gcWV6As0ChhA4=\", false, function () {\n  return [useNavigate, useLocation];\n});\n_c = SearchResultsPage;\nexport default SearchResultsPage;\nvar _c;\n$RefreshReg$(_c, \"SearchResultsPage\");","map":{"version":3,"names":["React","useEffect","useState","useNavigate","useLocation","GET_PAGE","jsxDEV","_jsxDEV","Fragment","_Fragment","SearchResultsPage","_s","navigate","location","allProducts","setAllProducts","currentPage","setCurrentPage","loading","setLoading","allResultsLoaded","setAllResultsLoaded","searchQuery","setSearchQuery","handleLoadMore","nextPage","products","data","length","newResults","prevProducts","error","console","query","URLSearchParams","search","get","fetchSearchResults","filteredResults","filter","row","title","toLowerCase","includes","className","children","fileName","_jsxFileName","lineNumber","columnNumber","map","href","id","style","height","objectFit","width","src","thumbnail","alt","marginLeft","onClick","_c","$RefreshReg$"],"sources":["C:/DiaD/java/frontend/src/pages/search/SearchResultPage.js"],"sourcesContent":["import React, { useEffect, useState } from 'react';\nimport { useNavigate, useLocation } from 'react-router-dom';\nimport { GET_PAGE } from '../api/apiService';\n// import imgNoSearch from '../assets/images/empty-search.webp';\n\nconst SearchResultsPage = () => {\n    const navigate = useNavigate();\n    const location = useLocation();\n    const [allProducts, setAllProducts] = useState([]);\n    const [currentPage, setCurrentPage] = useState(1);\n    const [loading, setLoading] = useState(false);\n    const [allResultsLoaded, setAllResultsLoaded] = useState(false);\n    const [searchQuery, setSearchQuery] = useState('');\n\n    \n\n    const handleLoadMore = async () => {\n        try {\n            if (allResultsLoaded) {\n                return;\n            }\n\n            const nextPage = currentPage + 1;\n            const products = await GET_PAGE('products', nextPage - 1, 10, null, null, searchQuery);\n\n            if (products.data.length === 0) {\n                setAllResultsLoaded(true);\n                return;\n            }\n\n            const newResults = products.data;\n\n            setAllProducts((prevProducts) => [...prevProducts, ...newResults]);\n            setCurrentPage(nextPage);\n        } catch (error) {\n            console.error('Error loading more:', error);\n        }\n    };\n\n    useEffect(() => {\n        const query = new URLSearchParams(location.search).get('q');\n        setSearchQuery(query);\n\n        // Chỉ thực hiện fetch dữ liệu khi có sự thay đổi trong searchQuery\n        if (query && query !== searchQuery) {\n            setLoading(true);\n            setCurrentPage(1); // Reset trang về 1 khi có sự thay đổi searchQuery\n            setAllResultsLoaded(false);\n\n            const fetchSearchResults = async () => {\n                try {\n                    const products = await GET_PAGE('products', 0, 10, null, null, query);\n                    setAllProducts(products.data);\n                } catch (error) {\n                    console.error('Error fetching search results:', error);\n                } finally {\n                    setLoading(false);\n                }\n            };\n\n            fetchSearchResults();\n        }\n    }, [location.search, searchQuery]);\n\n    const filteredResults = allProducts.filter((row) =>\n        row.title.toLowerCase().includes(searchQuery.toLowerCase())\n    );\n\n\n    return (\n        <div className=\"container\">\n            {filteredResults.length > 0 ? (\n                <>\n                    <h2>{`Tìm thấy sản phẩm cho từ khoá '${searchQuery}'`}</h2>\n\n                    <div className=\"row\">\n                        {filteredResults.map((row) => (\n                            <div className=\"col-xl-4 col-lg-4 col-md-4 col-6\" key={row.id}>\n<figure className=\"card card-product-grid\">\n                                    <div className=\"img-wrap\">\n                                        <span className=\"badge badge-danger\"> MỚI </span>\n                                        <a href={`/detailProduct?productId=${row.id}`} className=\"img-wrap\" style={{ height: '300px', objectFit: 'cover', width: '100%' }}>\n                                            <img src={`./images/items/${row.thumbnail}`} alt={row.title} />\n                                        </a>\n                                    </div>\n                                    <figcaption className=\"info-wrap\">\n                                        <a href=\"#\" className=\"title mb-2\">\n                                            {row.title}\n                                        </a>\n                                        <div className=\"price-wrap\">\n                                            <span className=\"price\">Ơ</span>\n                                        </div>\n                                    </figcaption>\n                                </figure>\n                            </div>\n                        ))}\n                    </div>\n\n                    <button className=\"btn btn-primary mb-3\" style={{ marginLeft: '590px' }} onClick={handleLoadMore}>\n                        Load More\n                    </button>\n                </>\n            ) : (\n                <div className=\"container d-flex flex-column align-items-center justify-content-center mt-3\">\n                    <>\n                        <img src={''} alt=\"No search results\" />\n                        <p className='mt-3 mb-3'>Không có sản phẩm bạn cần tìm.</p>\n                    </>\n                </div>\n\n            )}\n        </div>\n    );\n};\n\nexport default SearchResultsPage;"],"mappings":";;AAAA,OAAOA,KAAK,IAAIC,SAAS,EAAEC,QAAQ,QAAQ,OAAO;AAClD,SAASC,WAAW,EAAEC,WAAW,QAAQ,kBAAkB;AAC3D,SAASC,QAAQ,QAAQ,mBAAmB;AAC5C;AAAA,SAAAC,MAAA,IAAAC,OAAA;AAAA,SAAAC,QAAA,IAAAC,SAAA;AAEA,MAAMC,iBAAiB,GAAGA,CAAA,KAAM;EAAAC,EAAA;EAC5B,MAAMC,QAAQ,GAAGT,WAAW,CAAC,CAAC;EAC9B,MAAMU,QAAQ,GAAGT,WAAW,CAAC,CAAC;EAC9B,MAAM,CAACU,WAAW,EAAEC,cAAc,CAAC,GAAGb,QAAQ,CAAC,EAAE,CAAC;EAClD,MAAM,CAACc,WAAW,EAAEC,cAAc,CAAC,GAAGf,QAAQ,CAAC,CAAC,CAAC;EACjD,MAAM,CAACgB,OAAO,EAAEC,UAAU,CAAC,GAAGjB,QAAQ,CAAC,KAAK,CAAC;EAC7C,MAAM,CAACkB,gBAAgB,EAAEC,mBAAmB,CAAC,GAAGnB,QAAQ,CAAC,KAAK,CAAC;EAC/D,MAAM,CAACoB,WAAW,EAAEC,cAAc,CAAC,GAAGrB,QAAQ,CAAC,EAAE,CAAC;EAIlD,MAAMsB,cAAc,GAAG,MAAAA,CAAA,KAAY;IAC/B,IAAI;MACA,IAAIJ,gBAAgB,EAAE;QAClB;MACJ;MAEA,MAAMK,QAAQ,GAAGT,WAAW,GAAG,CAAC;MAChC,MAAMU,QAAQ,GAAG,MAAMrB,QAAQ,CAAC,UAAU,EAAEoB,QAAQ,GAAG,CAAC,EAAE,EAAE,EAAE,IAAI,EAAE,IAAI,EAAEH,WAAW,CAAC;MAEtF,IAAII,QAAQ,CAACC,IAAI,CAACC,MAAM,KAAK,CAAC,EAAE;QAC5BP,mBAAmB,CAAC,IAAI,CAAC;QACzB;MACJ;MAEA,MAAMQ,UAAU,GAAGH,QAAQ,CAACC,IAAI;MAEhCZ,cAAc,CAAEe,YAAY,IAAK,CAAC,GAAGA,YAAY,EAAE,GAAGD,UAAU,CAAC,CAAC;MAClEZ,cAAc,CAACQ,QAAQ,CAAC;IAC5B,CAAC,CAAC,OAAOM,KAAK,EAAE;MACZC,OAAO,CAACD,KAAK,CAAC,qBAAqB,EAAEA,KAAK,CAAC;IAC/C;EACJ,CAAC;EAED9B,SAAS,CAAC,MAAM;IACZ,MAAMgC,KAAK,GAAG,IAAIC,eAAe,CAACrB,QAAQ,CAACsB,MAAM,CAAC,CAACC,GAAG,CAAC,GAAG,CAAC;IAC3Db,cAAc,CAACU,KAAK,CAAC;;IAErB;IACA,IAAIA,KAAK,IAAIA,KAAK,KAAKX,WAAW,EAAE;MAChCH,UAAU,CAAC,IAAI,CAAC;MAChBF,cAAc,CAAC,CAAC,CAAC,CAAC,CAAC;MACnBI,mBAAmB,CAAC,KAAK,CAAC;MAE1B,MAAMgB,kBAAkB,GAAG,MAAAA,CAAA,KAAY;QACnC,IAAI;UACA,MAAMX,QAAQ,GAAG,MAAMrB,QAAQ,CAAC,UAAU,EAAE,CAAC,EAAE,EAAE,EAAE,IAAI,EAAE,IAAI,EAAE4B,KAAK,CAAC;UACrElB,cAAc,CAACW,QAAQ,CAACC,IAAI,CAAC;QACjC,CAAC,CAAC,OAAOI,KAAK,EAAE;UACZC,OAAO,CAACD,KAAK,CAAC,gCAAgC,EAAEA,KAAK,CAAC;QAC1D,CAAC,SAAS;UACNZ,UAAU,CAAC,KAAK,CAAC;QACrB;MACJ,CAAC;MAEDkB,kBAAkB,CAAC,CAAC;IACxB;EACJ,CAAC,EAAE,CAACxB,QAAQ,CAACsB,MAAM,EAAEb,WAAW,CAAC,CAAC;EAElC,MAAMgB,eAAe,GAAGxB,WAAW,CAACyB,MAAM,CAAEC,GAAG,IAC3CA,GAAG,CAACC,KAAK,CAACC,WAAW,CAAC,CAAC,CAACC,QAAQ,CAACrB,WAAW,CAACoB,WAAW,CAAC,CAAC,CAC9D,CAAC;EAGD,oBACInC,OAAA;IAAKqC,SAAS,EAAC,WAAW;IAAAC,QAAA,EACrBP,eAAe,CAACV,MAAM,GAAG,CAAC,gBACvBrB,OAAA,CAAAE,SAAA;MAAAoC,QAAA,gBACItC,OAAA;QAAAsC,QAAA,EAAM,kCAAiCvB,WAAY;MAAE;QAAAwB,QAAA,EAAAC,YAAA;QAAAC,UAAA;QAAAC,YAAA;MAAA,OAAK,CAAC,eAE3D1C,OAAA;QAAKqC,SAAS,EAAC,KAAK;QAAAC,QAAA,EACfP,eAAe,CAACY,GAAG,CAAEV,GAAG,iBACrBjC,OAAA;UAAKqC,SAAS,EAAC,kCAAkC;UAAAC,QAAA,eAC7EtC,OAAA;YAAQqC,SAAS,EAAC,wBAAwB;YAAAC,QAAA,gBACNtC,OAAA;cAAKqC,SAAS,EAAC,UAAU;cAAAC,QAAA,gBACrBtC,OAAA;gBAAMqC,SAAS,EAAC,oBAAoB;gBAAAC,QAAA,EAAC;cAAK;gBAAAC,QAAA,EAAAC,YAAA;gBAAAC,UAAA;gBAAAC,YAAA;cAAA,OAAM,CAAC,eACjD1C,OAAA;gBAAG4C,IAAI,EAAG,4BAA2BX,GAAG,CAACY,EAAG,EAAE;gBAACR,SAAS,EAAC,UAAU;gBAACS,KAAK,EAAE;kBAAEC,MAAM,EAAE,OAAO;kBAAEC,SAAS,EAAE,OAAO;kBAAEC,KAAK,EAAE;gBAAO,CAAE;gBAAAX,QAAA,eAC9HtC,OAAA;kBAAKkD,GAAG,EAAG,kBAAiBjB,GAAG,CAACkB,SAAU,EAAE;kBAACC,GAAG,EAAEnB,GAAG,CAACC;gBAAM;kBAAAK,QAAA,EAAAC,YAAA;kBAAAC,UAAA;kBAAAC,YAAA;gBAAA,OAAE;cAAC;gBAAAH,QAAA,EAAAC,YAAA;gBAAAC,UAAA;gBAAAC,YAAA;cAAA,OAChE,CAAC;YAAA;cAAAH,QAAA,EAAAC,YAAA;cAAAC,UAAA;cAAAC,YAAA;YAAA,OACH,CAAC,eACN1C,OAAA;cAAYqC,SAAS,EAAC,WAAW;cAAAC,QAAA,gBAC7BtC,OAAA;gBAAG4C,IAAI,EAAC,GAAG;gBAACP,SAAS,EAAC,YAAY;gBAAAC,QAAA,EAC7BL,GAAG,CAACC;cAAK;gBAAAK,QAAA,EAAAC,YAAA;gBAAAC,UAAA;gBAAAC,YAAA;cAAA,OACX,CAAC,eACJ1C,OAAA;gBAAKqC,SAAS,EAAC,YAAY;gBAAAC,QAAA,eACvBtC,OAAA;kBAAMqC,SAAS,EAAC,OAAO;kBAAAC,QAAA,EAAC;gBAAC;kBAAAC,QAAA,EAAAC,YAAA;kBAAAC,UAAA;kBAAAC,YAAA;gBAAA,OAAM;cAAC;gBAAAH,QAAA,EAAAC,YAAA;gBAAAC,UAAA;gBAAAC,YAAA;cAAA,OAC/B,CAAC;YAAA;cAAAH,QAAA,EAAAC,YAAA;cAAAC,UAAA;cAAAC,YAAA;YAAA,OACE,CAAC;UAAA;YAAAH,QAAA,EAAAC,YAAA;YAAAC,UAAA;YAAAC,YAAA;UAAA,OACT;QAAC,GAhB0CT,GAAG,CAACY,EAAE;UAAAN,QAAA,EAAAC,YAAA;UAAAC,UAAA;UAAAC,YAAA;QAAA,OAiBxD,CACR;MAAC;QAAAH,QAAA,EAAAC,YAAA;QAAAC,UAAA;QAAAC,YAAA;MAAA,OACD,CAAC,eAEN1C,OAAA;QAAQqC,SAAS,EAAC,sBAAsB;QAACS,KAAK,EAAE;UAAEO,UAAU,EAAE;QAAQ,CAAE;QAACC,OAAO,EAAErC,cAAe;QAAAqB,QAAA,EAAC;MAElG;QAAAC,QAAA,EAAAC,YAAA;QAAAC,UAAA;QAAAC,YAAA;MAAA,OAAQ,CAAC;IAAA,eACX,CAAC,gBAEH1C,OAAA;MAAKqC,SAAS,EAAC,6EAA6E;MAAAC,QAAA,eACxFtC,OAAA,CAAAE,SAAA;QAAAoC,QAAA,gBACItC,OAAA;UAAKkD,GAAG,EAAE,EAAG;UAACE,GAAG,EAAC;QAAmB;UAAAb,QAAA,EAAAC,YAAA;UAAAC,UAAA;UAAAC,YAAA;QAAA,OAAE,CAAC,eACxC1C,OAAA;UAAGqC,SAAS,EAAC,WAAW;UAAAC,QAAA,EAAC;QAA8B;UAAAC,QAAA,EAAAC,YAAA;UAAAC,UAAA;UAAAC,YAAA;QAAA,OAAG,CAAC;MAAA,eAC7D;IAAC;MAAAH,QAAA,EAAAC,YAAA;MAAAC,UAAA;MAAAC,YAAA;IAAA,OACF;EAER;IAAAH,QAAA,EAAAC,YAAA;IAAAC,UAAA;IAAAC,YAAA;EAAA,OACA,CAAC;AAEd,CAAC;AAACtC,EAAA,CA5GID,iBAAiB;EAAA,QACFP,WAAW,EACXC,WAAW;AAAA;AAAA0D,EAAA,GAF1BpD,iBAAiB;AA8GvB,eAAeA,iBAAiB;AAAC,IAAAoD,EAAA;AAAAC,YAAA,CAAAD,EAAA"},"metadata":{},"sourceType":"module","externalDependencies":[]}